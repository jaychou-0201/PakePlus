(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views"],{"095a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[t("avue-form",{attrs:{option:e.option},on:{"tab-click":e.handleTabClick,submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},a=[],r=(i("7f7f"),i("cadc")),s=i("c0c7"),o=i("8237"),c=i.n(o),l=i("d9a3"),d={data:function(){return{index:0,option:r["default"],form:{}}},created:function(){this.handleWitch()},methods:{handleSubmit:function(e,t){var i=this;0===this.index?Object(s["updateInfo"])(e).then((function(e){e.data.success?i.$message({type:"success",message:"修改信息成功!"}):i.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()})):Object(s["updatePassword"])(c()(e.oldPassword),c()(e.newPassword),c()(e.newPassword1)).then((function(e){e.data.success?i.$message({type:"success",message:"修改密码成功!"}):i.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()}))},handleWitch:function(){var e=this;0===this.index&&Object(s["getUserInfo"])().then((function(t){var i=t.data.data;e.form={id:i.id,avatar:i.avatar,name:i.name,realName:i.realName,phone:i.phone,email:i.email}}))},handleTabClick:function(e){this.index=l["a"].toInt(e.index),this.handleWitch()}}},h=d,u=i("2877"),g=Object(u["a"])(h,n,a,!1,null,null,null);t["default"]=g.exports},"2e20":function(e,t,i){},"338a":function(e,t,i){"use strict";i("2e20")},"4b9f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("div",{staticClass:"wel"},[t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-platform-eleme",text:"开始菜单1",time:"1",background:"/img/bg/bg3.jpg",color:"#d56259"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-eleme",text:"开始菜单2",time:"2",background:"/img/bg/bg2.jpg",color:"#419ce7"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-delete-solid",text:"开始菜单3",time:"3",color:"#56b69b"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-delete",text:"开始菜单4",time:"4",color:"#d44858"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-tools",text:"开始菜单5",time:"5",color:"#3a1f7e"}}),t("basic-block",{attrs:{width:410,height:e.height,icon:"el-icon-setting",text:"开始菜单6",time:"6",background:"/img/bg/bg1.jpg",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#422829"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-user-solid",text:"开始菜单7",time:"7",color:"#613cbd"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-star-off",text:"开始菜单8",time:"8",color:"#da542e"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-goods",text:"开始菜单9",time:"9",color:"#2e8aef"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-circle-check",text:"开始菜单10",time:"10",color:"#3d17b8"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-platform",text:"开始菜单11",time:"11",color:"#e31462"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-fold",text:"开始菜单12",time:"12",color:"#d9532d"}}),t("basic-block",{attrs:{width:410,height:e.height,icon:"el-icon-s-open",text:"开始菜单13",time:"13",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#b72147"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-flag",text:"开始菜单14",time:"14",color:"#01a100"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-data",text:"开始菜单15",time:"15",color:"#0c56bf"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-grid",text:"开始菜单16",time:"16",color:"#0098a9"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-release",text:"开始菜单17",time:"17",background:"/img/bg/bg2.jpg",color:"#209bdf"}}),t("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-home",text:"开始菜单18",time:"18",background:"/img/bg/bg3.jpg",color:"#603bbc"}}),t("basic-block",{attrs:{width:515,height:e.height,icon:"el-icon-s-promotion",text:"开始菜单19",time:"19",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#009bad"}}),t("basic-block",{attrs:{width:515,height:e.height,icon:"el-icon-s-custom",text:"开始菜单20",time:"20",background:"/img/bg/bg4.jpg",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#d74e2a"}})],1)])},a=[],r={data:function(){return{width:200,height:120}}},s=r,o=(i("338a"),i("2877")),c=Object(o["a"])(s,n,a,!1,null,null,null);t["default"]=c.exports},6486:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[t("el-row",[t("el-col",{attrs:{span:12}},[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(i){var n=i.row;return[t("el-tag",[e._v(e._s(0===n.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1),t("el-col",{attrs:{span:12}},[t("avue-crud",{ref:"crudChild",attrs:{option:e.option,"table-loading":e.loading,data:e.dataChild,page:e.pageChild,permission:e.permissionList,"before-open":e.beforeOpenChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"isSealed",fn:function(i){var n=i.row;return[t("el-tag",[e._v(e._s(0===n.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1)],1)},a=[],r=(i("8e6e"),i("456d"),i("6762"),i("2fdb"),i("ac6a"),i("ade3")),s=i("7754"),o=i("5880");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={data:function(){return{parentId:0,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]}}},computed:l(l({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,i){var n=this;Object(s["add"])(e).then((function(){n.onLoadParent(n.pageParent),n.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),i()}))},rowUpdate:function(e,t,i,n){var a=this;Object(s["update"])(e).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),i()}),(function(e){window.console.log(e),n()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.parentId=e.id,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var i=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formParent.id).then((function(e){i.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.page,this.query)},rowSaveChild:function(e,t,i){var n=this;Object(s["add"])(e).then((function(){n.onLoadChild(n.pageChild),n.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),i()}))},rowUpdateChild:function(e,t,i,n){var a=this;Object(s["update"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),i()}),(function(e){window.console.log(e),n()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var i=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formChild.id).then((function(e){i.formChild=e.data.data})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getParentList"])(e.currentPage,e.pageSize,Object.assign(i,this.query)).then((function(e){var i=e.data.data;t.pageParent.total=i.total,t.dataParent=i.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(i,this.query)).then((function(e){var i=e.data.data;t.pageChild.total=i.total,t.dataChild=i.records,t.loading=!1,t.selectionClear()}))}}},h=d,u=i("2877"),g=Object(u["a"])(h,n,a,!1,null,null,null);t["default"]=g.exports},"6e96":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAgree}},[e._v("同意")]),t("el-button",{attrs:{type:"danger"},on:{click:e.handleDisagree}},[e._v("驳回")]),t("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审批信息")])]),t("el-form-item",{attrs:{label:"申请人"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.flow.assigneeName,callback:function(t){e.$set(e.form.flow,"assigneeName",t)},expression:"form.flow.assigneeName"}})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"开始时间"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"结束时间"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),t("el-form-item",{attrs:{label:"请假理由"}},[t("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),t("el-form-item",{attrs:{label:"批复意见"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("流程信息")])]),t("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[t("el-timeline",e._l(e.flowList,(function(i){return t("el-timeline-item",{key:i.id,attrs:{timestamp:i.createTime,placement:"top"}},[t("el-card",{attrs:{shadow:"hover"}},[t("p",[e._v(e._s(i.assigneeName)+" 在 ["+e._s(i.createTime)+"] 开始处理 ["+e._s(i.historyActivityName)+"] 环节")]),""!==i.historyActivityDurationTime?t("p",[e._v("任务历时 ["+e._s(i.historyActivityDurationTime)+"]")]):e._e(),""!==i.comment?t("p",[e._v("批复意见: ["+e._s(i.comment)+"]")]):e._e(),""!==i.endTime?t("p",[e._v("结束时间: ["+e._s(i.endTime)+"]")]):e._e()])],1)})),1)],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("流程跟踪")])]),t("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[t("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},a=[],r=i("fc8c"),s=i("1e69"),o={data:function(){return{taskId:"",businessId:"",processInstanceId:"",src:"",flowList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:"",comment:""}}},created:function(){this.init()},beforeRouteUpdate:function(e,t,i){e.fullPath!==t.fullPath&&(i(),this.init())},methods:{init:function(){var e=this;this.taskId=this.$route.params.taskId,this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId,"&t=").concat((new Date).getTime()),Object(r["historyFlowList"])(this.processInstanceId).then((function(t){var i=t.data;i.success&&(e.flowList=i.data)})),Object(r["leaveDetail"])(this.businessId).then((function(t){var i=t.data;i.success&&(e.form=i.data)}))},handleAgree:function(){var e=this;if(this.form.comment){var t={taskId:this.taskId,processInstanceId:this.processInstanceId,flag:"ok",comment:this.form.comment};Object(s["completeTask"])(t).then((function(t){var i=t.data;i.success?(e.$message.success(i.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(i.msg||"提交失败")}))}else this.$message.warning("请先填写批复意见")},handleDisagree:function(){var e=this;if(this.form.comment){var t={taskId:this.taskId,processInstanceId:this.processInstanceId,comment:this.form.comment};Object(s["completeTask"])(t).then((function(t){var i=t.data;i.success?(e.$message.success(i.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(i.msg||"提交失败")}))}else this.$message.warning("请先填写批复意见")},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},c=o,l=i("2877"),d=Object(l["a"])(c,n,a,!1,null,null,null);t["default"]=d.exports},ab5c:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[e._v("测试页")])],1)},a=[],r={name:"wel",data:function(){return{}},computed:{},created:function(){},methods:{}},s=r,o=i("2877"),c=Object(o["a"])(s,n,a,!1,null,"1f96fafa",null);t["default"]=c.exports},d26f:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[t("el-form-item",[t("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审批信息")])]),t("el-form-item",{attrs:{label:"申请人"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.flow.assigneeName,callback:function(t){e.$set(e.form.flow,"assigneeName",t)},expression:"form.flow.assigneeName"}})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"开始时间"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"结束时间"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),t("el-form-item",{attrs:{label:"请假理由"}},[t("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("流程信息")])]),t("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[t("el-timeline",e._l(e.flowList,(function(i){return t("el-timeline-item",{key:i.id,attrs:{timestamp:i.createTime,placement:"top"}},[t("el-card",{attrs:{shadow:"hover"}},[t("p",[e._v(e._s(i.assigneeName)+" 在 ["+e._s(i.createTime)+"] 开始处理 ["+e._s(i.historyActivityName)+"] 环节")]),""!==i.historyActivityDurationTime?t("p",[e._v("任务历时 ["+e._s(i.historyActivityDurationTime)+"]")]):e._e(),""!==i.comment?t("p",[e._v("批复意见: ["+e._s(i.comment)+"]")]):e._e(),""!==i.endTime?t("p",[e._v("结束时间: ["+e._s(i.endTime)+"]")]):e._e()])],1)})),1)],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("流程跟踪")])]),t("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[t("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},a=[],r=i("fc8c"),s={data:function(){return{businessId:"",processInstanceId:"",src:"",flowList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:""}}},created:function(){this.init()},methods:{init:function(){var e=this;this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId,"&t=").concat((new Date).getTime()),Object(r["historyFlowList"])(this.processInstanceId).then((function(t){var i=t.data;i.success&&(e.flowList=i.data)})),Object(r["leaveDetail"])(this.businessId).then((function(t){var i=t.data;i.success&&(e.form=i.data)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},o=s,c=i("2877"),l=Object(c["a"])(o,n,a,!1,null,null,null);t["default"]=l.exports},d9a3:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("f559"),i("28a5"),i("456d"),i("ac6a"),i("c5f6"),i("ee1d");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=i("a38e");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Object(a["a"])(n.key),n)}}function s(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=function(){function e(){n(this,e)}return s(e,null,[{key:"notEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isUndefined",value:function(e){return null===e||"undefined"===typeof e}},{key:"isEmpty",value:function(e){return null===e||"undefined"===typeof e||"string"===typeof e&&""===e&&"undefined"!==e}},{key:"toInt",value:function(e,t){if(this.isEmpty(e))return void 0===t?-1:t;var i=parseInt(e,0);return Number.isNaN(i)?void 0===t?-1:t:i}},{key:"toFormData",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(i){t.append(i,Array.isArray(e[i])?e[i].join(","):e[i])})),t}},{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-DD HH:mm:ss";return e?e.format(t):null}},{key:"join",value:function(e){return Array.isArray(e)?e.join(","):e}},{key:"split",value:function(e){return e?String(e).split(","):""}},{key:"toStr",value:function(e){return"undefined"===typeof e||null===e?"":e}},{key:"isArrayAndNotEmpty",value:function(e){return Array.isArray(e)&&e.length>0}},{key:"formatUrl",value:function(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:"http://".concat(e):e}},{key:"bytesToKB",value:function(e){var t=e/1024;return t.toFixed(2)}}])}()},dd4b:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[t("el-row",[t("el-col",{attrs:{span:24}},[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(i){var n=i.row;return[t("el-tag",[e._v(e._s(0===n.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1),t("basic-container",[t("el-row",[t("el-col",{attrs:{span:24}},[t("avue-crud",{ref:"crudChild",attrs:{option:e.option,"table-loading":e.loading,data:e.dataChild,page:e.pageChild,permission:e.permissionList,"before-open":e.beforeOpenChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"isSealed",fn:function(i){var n=i.row;return[t("el-tag",[e._v(e._s(0===n.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1)],1)},a=[],r=(i("8e6e"),i("456d"),i("6762"),i("2fdb"),i("ac6a"),i("ade3")),s=i("7754"),o=i("5880");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={data:function(){return{parentId:0,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,pageParent:{pageSize:5,pageSizes:[5,10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:5,pageSizes:[5,10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,height:300,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]}}},computed:l(l({},Object(o["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,i){var n=this;Object(s["add"])(e).then((function(){n.onLoadParent(n.pageParent),n.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),i()}))},rowUpdate:function(e,t,i,n){var a=this;Object(s["update"])(e).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),i()}),(function(e){window.console.log(e),n()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.parentId=e.id,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var i=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formParent.id).then((function(e){i.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.page,this.query)},rowSaveChild:function(e,t,i){var n=this;Object(s["add"])(e).then((function(){n.onLoadChild(n.pageChild),n.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),i()}))},rowUpdateChild:function(e,t,i,n){var a=this;Object(s["update"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),i()}),(function(e){window.console.log(e),n()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var i=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formChild.id).then((function(e){i.formChild=e.data.data})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getParentList"])(e.currentPage,e.pageSize,Object.assign(i,this.query)).then((function(e){var i=e.data.data;t.pageParent.total=i.total,t.dataParent=i.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(i,this.query)).then((function(e){var i=e.data.data;t.pageChild.total=i.total,t.dataChild=i.records,t.loading=!1,t.selectionClear()}))}}},h=d,u=i("2877"),g=Object(u["a"])(h,n,a,!1,null,null,null);t["default"]=g.exports},eaa2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-form",{attrs:{option:e.option},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},a=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),s=i("fc8c");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={data:function(){return{form:{},option:{group:[{icon:"el-icon-info",label:"请假基础信息",prop:"group1",column:[{label:"审批人员",prop:"taskUser",type:"select",dicUrl:"/api/blade-user/user-list",props:{label:"account",value:"id"},span:24,rules:[{required:!0,message:"请选择审批人员",trigger:"blur"}]},{label:"开始时间",prop:"startTime",type:"datetime",valueFormat:"yyyy-MM-dd HH:mm:ss",rules:[{required:!0,message:"请选择开始时间",trigger:"blur"}]},{label:"结束时间",prop:"endTime",type:"datetime",valueFormat:"yyyy-MM-dd HH:mm:ss",rules:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},{label:"请假理由",prop:"reason",type:"textarea",span:24,rules:[{required:!0,message:"请输入请假理由",trigger:"blur"}]}]}]}}},methods:{handleSubmit:function(){var e=this,t=c({processDefinitionId:this.$route.params.processDefinitionId},this.form);Object(s["leaveProcess"])(t).then((function(t){var i=t.data;i.success?(e.$message.success(i.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(i.msg||"提交失败")}))}}},d=l,h=i("2877"),u=Object(h["a"])(d,n,a,!1,null,null,null);t["default"]=u.exports}}]);